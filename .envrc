# Use the Nix flake for development environment
use flake

# Additional project-specific environment variables
export PROJECT_ROOT="$PWD"

# Set up Go workspace in project directory to keep dependencies local
export GOPATH="$PWD/.go"
export GOCACHE="$PWD/.go/cache"
export GOMODCACHE="$PWD/.go/pkg/mod"

# Add Go bin to PATH for locally installed tools
PATH_add "$GOPATH/bin"

# Development mode flags
export DSOPS_DEV=true
export DSOPS_DEBUG=true

# Ensure Go modules are enabled
export GO111MODULE=on

# Enable CGO for better compatibility
export CGO_ENABLED=1

# Optional: Set up provider-specific environment variables
# Uncomment and configure as needed for your development setup

# 1Password
# export OP_SESSION_my_account="your-session-token"

# Bitwarden  
# export BW_SESSION="your-session-token"

# AWS (if using AWS Secrets Manager)
# export AWS_PROFILE="your-profile"
# export AWS_REGION="us-east-1"

# Vault (if using HashiCorp Vault)
# export VAULT_ADDR="https://vault.example.com"
# export VAULT_TOKEN="your-token"

# Azure (if using Azure Key Vault)
# export AZURE_SUBSCRIPTION_ID="your-subscription-id"

# Google Cloud (if using Google Secret Manager)
# export GOOGLE_APPLICATION_CREDENTIALS="path/to/service-account.json"
# export GOOGLE_PROJECT_ID="your-project-id"

# Display environment info when entering directory
echo "üîê dsops development environment loaded"
echo "Go workspace: $GOPATH"
echo "Project root: $PROJECT_ROOT"