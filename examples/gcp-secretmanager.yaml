# Google Cloud Secret Manager Example Configuration
providers:
  # Basic GCP Secret Manager
  gcp-sm:
    type: gcp.secretmanager
    project_id: my-gcp-project
    # Authentication via Application Default Credentials (recommended)
    # Run: gcloud auth application-default login
  
  # Using service account key file
  gcp-sa:
    type: gcp.secretmanager
    project_id: my-gcp-project
    service_account_key_path: ~/gcp/service-account.json
  
  # Using service account impersonation
  gcp-impersonate:
    type: gcp.secretmanager
    project_id: my-gcp-project
    impersonate_service_account: deployer@my-gcp-project.iam.gserviceaccount.com

envs:
  production:
    # Simple secret retrieval
    DATABASE_PASSWORD:
      from: gcp-sm:prod-database-password
    
    # Secret with specific version
    API_KEY:
      from: gcp-sm:api-key:latest
      optional: false
    
    # Older version of a secret
    LEGACY_TOKEN:
      from: gcp-sm:auth-token:1
    
    # JSON secret with field extraction
    DATABASE_CONFIG:
      from: gcp-sm:database-config#.connection_string
    
    # Complex JSON extraction
    REDIS_HOST:
      from: gcp-sm:redis-config#.cluster.primary.host
    
    # Using full resource name
    SHARED_SECRET:
      from: gcp-sm:projects/shared-project/secrets/shared-secret/versions/latest
    
    # Secret with transforms
    ENCODED_CERT:
      from: gcp-sm:ssl-certificate
      transform:
        - base64_encode
        - trim
    
    # JSON array extraction
    ALLOWED_IPS:
      from: gcp-sm:firewall-config#.allowed_ips.0
    
  development:
    # Development secrets
    DEV_DATABASE_URL:
      from: gcp-sm:dev-database-url
    
    # Using service account for dev environment
    DEV_API_KEY:
      from: gcp-sa:dev-api-key