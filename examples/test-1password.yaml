version: 0

# Test configuration for 1Password
# This will fail gracefully if 1Password CLI isn't configured
providers:
  onepassword:
    type: onepassword
    # account: myteam.1password.com  # Optional: specific account

  # Keep a literal provider for fallback testing
  literal_test:
    type: literal
    values:
      test_value: "1password-provider-test"

envs:
  test:
    # This will work with literal provider
    TEST_VALUE:
      from: { provider: literal_test, key: "test_value" }
      
    # 1Password examples (will fail gracefully if no 1Password setup)
    # Using dot notation (traditional dsops format)
    DATABASE_PASSWORD:
      from: { provider: onepassword, key: "dev-database.password" }
      optional: true
    
    # Using op:// URI format (native 1Password format)
    API_KEY:
      from: { provider: onepassword, key: "op://Private/API Keys/credential" }
      optional: true
      
    # Access different field types
    DB_USERNAME:
      from: { provider: onepassword, key: "dev-database.username" }
      optional: true
    
    DB_URL:
      from: { provider: onepassword, key: "dev-database.url" }
      optional: true
    
    # Access notes field (useful for certificates, keys, etc.)
    SSL_CERT:
      from: { provider: onepassword, key: "ssl-config.notes" }
      optional: true

  production:
    # Production 1Password examples
    PROD_DB_PASS:
      from: { provider: onepassword, key: "op://Company/Production DB/password" }
      optional: true
    
    PROD_API_KEY:
      from: { provider: onepassword, key: "op://Company/API Keys/prod_key" }
      optional: true